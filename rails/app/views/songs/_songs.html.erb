<table class="table table-striped table-bordered table-fixed">
  <tr>
    <th>Title</th>
    <th>Artist</th>
    <th>Album</th>
    <th>Duration</th>
    <% if type == :add %>
      <th>Play Duration</th>
    <% end %>
    <th></th>
  </tr>
  <% songs_count = songs.count %>
  <% if songs_count == 0 %>
    <td colspan=<%= type == :add ? 6 : 5 %>>No Songs</td>
  <% end %>
  <% songs.each do |song| %>
    <tr>
      <td><%= song[:name] %></td>
      <td><%= song[:artist] %></td>
      <td><%= song[:album] %></td>
      <td><%= song[:duration].round(2) %> seconds</td>
      <% if type == :add %>
        <td class="text-center">
          <%= form_tag user_song_path(user_id: @user.id, id: song[:song_id]), method: :patch, class: 'form-inline' do %>
            <div class="form-group">
              <div class="col-md-4 padding-none">
                <%= text_field_tag 'start_at', song[:start_at], class: 'form-control text-center', placeholder: 'Start' %>
              </div>
              <div class="col-md-4 padding-none">
                <%= text_field_tag 'end_at', song[:end_at], class: 'form-control text-center', placeholder: 'End' %>
              </div>
              <%= submit_tag 'Save', class: 'btn emerland-bkg white white-hover' %>

            </div>
          <% end %>
        </td>
      <% end %>
      <td class="text-center">
        <%
          case type
          when :add
        %>
          <%=
            button_to(
              'Remove',
              user_songs_path(track_id: song[:id], type: 'remove'),
              class: 'btn clay-bkg white white-hover'
            )
          %>
        <%
          when :delete
        %>
          <%=
            button_to(
              'Add',
              user_songs_path(track_id: song[:id], type: 'add'),
              class: 'btn blue-aragonite-bkg white white-hover'
            )
          %>
        <% end %>
      </td>
    </tr>
  <% end %>
  <% if songs_count == Music::SONG_LIMIT %>
    <td colspan=<%= type == :add ? 6 : 5 %>>
      Refine search to see potentially truncated songs
    </td>
  <% end %>
</table>
